(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{265:function(e,t,a){e.exports=a.p+"static/media/logo.0a58105d.png"},269:function(e,t,a){e.exports=a(651)},276:function(e,t,a){},278:function(e,t,a){},280:function(e,t,a){},293:function(e,t){},314:function(e,t){},316:function(e,t){},385:function(e,t){},580:function(e,t){},647:function(e,t,a){},649:function(e,t,a){},651:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(61),o=a.n(c),l=a(21);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(26),i=a(12),u={polls:[],web3:void 0,auth:!1,verified:!1},m=Object(n.createContext)(u),p=m.Provider,d=a(3),f=a.n(d),b=a(13),E=a(133),h=a(659),v=(a(276),a(278),a(280),a(76)),g=a(652),y=a(660),O=a(653),j=a(654),x=a(657),w=a(661),N=a(662),k=a(41),C=a.n(k),S=a(655),B=a(656),F="0x61a8598eabb7bddca95d3783c228878cd788e0a9",I={BAR_CONFIG:function(e,t){return{type:"horizontalBar",responsive:!0,data:{labels:["Yes","No"],datasets:[{data:e,borderColor:"#d048b6",borderWidth:2,fill:!0}]},options:{legend:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Wei (ETH)"},ticks:{suggestedMin:0,max:t,callback:function(e,t,a){return e>1e8||e<-1e8?e.toExponential():e}}}]}}}},SPLINE_CONFIG:function(e,t){var a={};return{options:{lineTension:100,bezierCurve:!0,legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:"millisecond",unitStepSize:216e5,displayFormats:{millisecond:"MMM D"}},ticks:{callback:function(e,t,n){return void 0===a[e]||0==t?a[e]=!0:e="",e}}}],yAxes:[{id:"yAxis1",scaleLabel:{labelString:"Wei (ETH)",display:!0},ticks:{min:-1*t,max:t,callback:function(e,t,a){return e>1e8||e<-1e8?e.toExponential():e}}},{id:"yAxis2",labels:["","Yes","","No",""],type:"category",gridLines:{drawOnChartArea:!1,display:!1}}]}},type:"line",data:e}},SPLINE_STYLE:function(e){return{label:"Data",fill:!0,backgroundColor:e,borderColor:"#d048b6",borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:"#d048b6",pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:"#d048b6",pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4}}},D=[{constant:!1,inputs:[{name:"_name",type:"string"},{name:"_data",type:"string"},{name:"_deadline",type:"uint64"}],name:"newVoteProposal",outputs:[{name:"newProposal",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"proposal",type:"address"},{indexed:!1,name:"issuer",type:"address"},{indexed:!1,name:"deadline",type:"uint256"},{indexed:!1,name:"name",type:"string"},{indexed:!1,name:"data",type:"string"},{indexed:!1,name:"optionA",type:"string"},{indexed:!1,name:"optionAaddr",type:"address"},{indexed:!1,name:"optionB",type:"string"},{indexed:!1,name:"optionBaddr",type:"address"}],name:"newProposalIssued",type:"event"}],T=a(259),_=a.n(T),q=a(260),L=a.n(q),P=a(261),A=a.n(P),H=a(262),W=a.n(H),R={walletconnect:{package:A.a,options:{infuraId:"INFURA_ID"}},authereum:{package:W.a,options:{}}},M=function(){return new Promise(function(){var e=Object(b.a)(f.a.mark(function e(t,a){var n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new L.a.Core({network:"mainnet",cacheProvider:!0,providerOptions:R}),e.next=4,n.connect();case 4:r=e.sent,c=new _.a(r),t(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}())},z=a(265),G=a.n(z);var V=Object(E.h)(function(e){var t=Object(n.useState)({question:!1,description:!1}),a=Object(i.a)(t,2),c=(a[0],a[1],Object(n.useState)({create:!1,about:!1})),o=Object(i.a)(c,2),u=o[0],p=o[1],d=Object(n.useState)(r.a.createElement(te,null)),h=Object(i.a)(d,2),k=h[0],I=h[1],T=Object(n.useState)(!1),_=Object(i.a)(T,2),q=_[0],L=_[1],P=Object(n.useState)(r.a.createElement(n.Fragment,null)),A=Object(i.a)(P,2),H=A[0],W=A[1],R=Object(n.useState)(""),z=Object(i.a)(R,2),V=(z[0],z[1],Object(n.useRef)(null)),Y=Object(n.useRef)(null),J=Object(n.useContext)(m),U=J.dispatch,$=J.state,K=Object(E.f)();function Q(){return X.apply(this,arguments)}function X(){return(X=Object(b.a)(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return t=e.sent,e.next=6,t.eth.getAccounts();case 6:a=e.sent,n=new t.eth.Contract(D,F),U({payload:{web3:t,accounts:a,instance:n,auth:!0,verified:!0},type:"WEB3"}),I(r.a.createElement(ae,{account:a[0]})),W(r.a.createElement(ne,{account:a[0]})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Web3 login could not be detected");case 16:case"end":return e.stop()}},e,null,[[0,13]])}))).apply(this,arguments)}function Z(e){var t="/".concat(e);K[K.length-1]!==t&&K.push(t),p(Object(s.a)({},u,Object(v.a)({},e,!0)))}function ee(e){K.push("/"),p(Object(s.a)({},u,Object(v.a)({},e,!1)))}function te(){return r.a.createElement(l.b,{to:"/login"},r.a.createElement(g.a,null,"Login"))}function ae(e){var t=e.account;return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{type:"button",onClick:function(){return Z("create")}}," Create "),r.a.createElement(l.b,{to:"/profile/".concat(t)},r.a.createElement(g.a,null," Profile ")),r.a.createElement(l.b,{to:"/logout"},r.a.createElement(g.a,null,"Logout")))}function ne(e){var t=e.account;return r.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(t)},r.a.createElement("img",{className:"nav-profile",src:C()(t)}))}var re=function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$.web3,a=$.instance,n=$.accounts,e.next=3,t.eth.getBlock("latest");case 3:return r=e.sent,c=r.timestamp+604800,e.next=7,a.methods.newVoteProposal(Y.current.value,V.current.value,c).send({from:n[0]}).on("transactionHash",function(e){ee("create"),document.getElementsByClassName("create-poll-description")[0].value="",document.getElementsByClassName("create-poll-question")[0].value=""});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){!function(){var t=Object(b.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.location&&(e.location.pathname.match("about")?Z("about"):e.location.pathname.match("create")?Z("create"):e.location.pathname.match("login")?(Q(),K.push("/")):e.location.pathname.match("logout")&&(U({payload:{web3:!1,auth:!1,verified:!1},type:"WEB3"}),I(r.a.createElement(te,null)),W(r.a.createElement(n.Fragment,null)),K.push("/")));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[e.location.pathname]),r.a.createElement(S.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("nav",{className:"navbar navbar-expand-lg fixed-top col-sm-12 col-md-7"},r.a.createElement("div",{className:"navbar-wrapper"},r.a.createElement(l.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{className:"navbar-logo",src:G.a}),r.a.createElement("span",{className:"navbar-title"}," Burn Signal "))),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},H,r.a.createElement(x.a,{isOpen:q,toggle:function(){return L(function(e){return!e})}},r.a.createElement(w.a,{caret:!0},r.a.createElement("i",{className:"nav-login-icon tim-icons icon-minimal-down"})),r.a.createElement(N.a,null,r.a.createElement(l.b,{to:"/"},r.a.createElement(g.a,null," Home ")),k,r.a.createElement(g.a,{divider:!0}),r.a.createElement(g.a,{type:"button",onClick:function(){return Z("about")}},"About"),r.a.createElement(g.a,{target:"_",href:"https://blog.burnsignal.io"},"Blog")))))))),r.a.createElement(function(){return r.a.createElement(y.a,{isOpen:u.about},r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title align-left"},"About"),r.a.createElement("button",{type:"button",className:"close",onClick:function(){return ee("about")}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,r.a.createElement("p",null,"Burn Signal is an experiment in distributed preference signaling where verified unique users burn ETH to signal their opinion."),r.a.createElement("p",null,"Votes are weighted quadratically."),r.a.createElement("p",null,"We use ",r.a.createElement("a",{id:"pink",target:"_",href:"https://brightid.org"},"BrightID")," as our proof of uniqueness, only votes cast by ethereum addresses that are verified unique by BrightID count towards the outcome of a burn signals."),r.a.createElement("br",null),r.a.createElement("p",null,"Burn Signal is funded by grants and community contributions. If you would like to contribute funds, check out our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://gitcoin.co/grants/138/burner-vote"},"Gitcoin Grants campaign"),", if you would like to contribute code or other work, check out our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://github.com/burnsignal"},"GitHub")," and our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://colony.io/colony/burn"},"Colony"),"."),r.a.createElement("br",null),r.a.createElement("p",null,"Check out our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://blog.burnsignal.io"}," blog ")," for more information.")))},null),r.a.createElement(function(){return r.a.createElement(y.a,{isOpen:u.create},r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title align-left"},"Create"),r.a.createElement("button",{type:"button",className:"close",onClick:function(){return ee("create")}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,r.a.createElement("input",{name:"question",ref:Y,placeholder:"What question is on your mind?",className:"create-poll-question"}),r.a.createElement("textarea",{name:"description",ref:V,placeholder:"Description",className:"create-poll-description"}),r.a.createElement("button",{className:"btn btn-primary button-poll",onClick:re}," Create ")))},null))}),Y=a(658),J=a(78),U=a(141),$=function(e){return Object(J.a)(e.substring(0,10)).reduceRight(function(e,t,a,n){return[].concat(Object(J.a)(e),[n.splice(~~(Math.random()*n.length),1)[0]])},[]).join("")},K=function(e){return parseInt(e)>=1e15?"".concat(parseFloat(e/Math.pow(10,18)).toFixed(3)," ETH"):parseInt(e)>=1e6?"".concat((e/1e9).toFixed(3)," GWEI"):parseInt(e)<1e6?"".concat(parseFloat(e).toFixed(2)," WEI"):void 0},Q=function(e,t){var a=e.concat(t),n=0;for(a.sort(function(e,t){return e.x-t.x});n<a.length;){var r=a[n];if(0!=n){var c=a[n-1];if(r.x-c.x<=12e5){var o=r.y+c.y,l=r.x;a[n-1]={x:l,y:o},a.splice(n,1),n--}else n++}else n++}var s=a;return s.sort(function(e,t){return e.y-t.y}),[a,s]},X=function(){var e=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={yes:[],no:[],voters:[]},e.next=3,Object.entries(t).map(function(){var e=Object(b.a)(f.a.mark(function e(t){var n,r,c,o,l,s,u;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.a)(t,2),n[0],r=n[1],c=r.address,o=r.yes,l=r.no,e.next=4,Z(o,"yes",[]);case 4:return s=e.sent,e.next=7,Z(l,"no",[]);case 7:u=e.sent,Object.assign(a.yes,a.yes.concat(s)),Object.assign(a.no,a.no.concat(u)),a.voters.push(c);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Z=function(e,t,a){return new Promise(function(n){e.value.forEach(function(n,r){var c=e.timestamps[r],o=parseFloat(n);"no"===t&&(o*=-1),isNaN(o)&&(o=0),a.push({x:1e3*c,y:o})}),n(a)})},ee=function(e){e=e.toLowerCase().replace("0x","");for(var t=Object(U.keccak_256)(e),a="0x",n=0;n<e.length;n++)parseInt(t[n],16)>=8?a+=e[n].toUpperCase():a+=e[n];return a};var te=function(e){return"-"===(e=(e=e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")).replace(/ /g,"-").toLowerCase()).substring(e.length-1,e.length)&&(e=e.slice(0,e.length-1)),e.replace("?","")},ae=a(641);var ne=function(e){var t="".concat(te(e.title),".burnsignal.eth"),a=Object(n.useRef)(null),c=Object(n.useContext)(m).state;e.title;var o=function(){var t=Object(b.a)(f.a.mark(function t(n){var r,o;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.web3,o=a.current.value%1===0?r.utils.toBN(parseFloat(a.current.value)).mul(r.utils.toBN(1e18)):parseInt(a.current.value*Math.pow(10,18)),t.next=4,r.eth.sendTransaction({to:e.address[n],from:c.accounts[0],value:o}).on("transactionHash",function(){e.modalToggle()});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{isOpen:e.modalState},c.web3&&c.verified&&r.a.createElement(function(t){var c=t.option;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close",onClick:e.modalToggle},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,r.a.createElement("span",{className:"vote-selection"}," How much ETH will you burn to cast your vote? "),r.a.createElement("input",{type:"number",ref:a,className:"modal-input",placeholder:"0.5 ETH"})),r.a.createElement(Y.a,null,r.a.createElement("button",{type:"button",className:"btn btn-primary btn-verify","data-dismiss":"modal",onClick:function(){return o(c)}},"Vote ",c)))},{option:e.modalOption}),!c.web3&&!c.verified&&r.a.createElement(function(a){var c=a.option;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close",onClick:e.modalToggle},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,{className:"align-center"},"Vote ",r.a.createElement("span",{id:"pink"},c)," by sending any amount of ETH to ",r.a.createElement("br",null),r.a.createElement("a",{target:"_",href:"https://etherscan.io"},r.a.createElement("span",{id:"pink"},c),".",t),r.a.createElement("div",{className:"poll-qr"},r.a.createElement(ae,{value:e.address[c]})),"To ensure that you vote counts, please link your ethereum account to your BrightID account at\u2028 ",r.a.createElement("a",{target:"_",href:"https://ethereum.brightid.org"},"ethereum.brightid.org")))},{option:e.modalOption}),c.web3&&!c.verified&&r.a.createElement(function(){return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title"},"Please verify your account"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:e.dismiss},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,"Before casting your vote, you should verify your Ethereum account using BrightID."),r.a.createElement(Y.a,null,r.a.createElement("button",{type:"button",className:"btn btn-primary btn-verify","data-dismiss":"modal"},"Verify")))},null)))},re=function(e){return'{ polls(where: { id: "'.concat(e,'" }) { yes no users { address yes { contributions timestamps total value sqrt } no { contributions timestamps total value sqrt } } } }')},ce='{ issues(where: { title_not_contains: "question" }) { id poll body title issuer deadline optionBaddr optionAaddr } }',oe=function(e){return'{ issues(where: { title: "'.concat(e,'" }) { poll } }')},le=function(e){return'{ user(id: "'.concat(e.toLowerCase(),'") { burns polls burned } }')},se=function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.thegraph.com/subgraphs/name/burnsignal/proof-of-concept",Object(s.a)({},(a=t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:a})}))).then(function(e){return e.json()}).then(function(e){return e}).catch(console.log);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}();function ie(){return ue.apply(this,arguments)}function ue(){return(ue=Object(b.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(ce);case 2:return t=e.sent,a={},t.data.issues.forEach(function(e){a[e.poll]=Object(s.a)({},e)}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(oe(t));case 2:if(0!=(a=e.sent).data.issues.length){e.next=7;break}return e.abrupt("return",{id:""});case 7:return e.abrupt("return",a.data.issues[0].poll);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(re(t));case 2:if(0!=(a=e.sent).data.polls.length){e.next=7;break}return e.abrupt("return",{yes:0,no:0,users:[]});case 7:return e.abrupt("return",a.data.polls[0]);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(le(t));case 2:if(null!==(a=e.sent).data.user){e.next=7;break}return e.abrupt("return",{burned:0,polls:[],burns:[]});case 7:return e.abrupt("return",a.data.user);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}a(647);var he=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),u=s[0],m=s[1],p=Object(n.useState)(0),d=Object(i.a)(p,2),h=d[0],v=d[1],g=Object(n.useState)(0),y=Object(i.a)(g,2),O=y[0],j=y[1],x=Object(E.g)().address;return Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,o,l,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(x);case 2:t=e.sent,a=[],n=t.burned,r=t.polls,o=t.burns,l=0;case 6:if(!(l<r.length)){e.next=14;break}return e.next=9,me(r[l]);case 9:s=e.sent,"question"!=r[l]&&a.push({address:s,title:r[l]});case 11:l++,e.next=6;break;case 14:j(K(parseInt(n)/o.length)),v(o.length),c(K(n)),m(a);case 18:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("div",{className:"profile"},r.a.createElement(S.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement(l.b,{to:"/profile/".concat(x)},r.a.createElement("img",{className:"profile-blockie",src:C()(x)})),r.a.createElement("div",{className:"profile-stats"},r.a.createElement("div",{className:"profile-address"},r.a.createElement("a",{href:"https://etherscan.io/address/".concat(x)},ee(x))),r.a.createElement("span",{className:"profile-stat"},"Burned: ",r.a.createElement("span",{id:"pink"},a)," "),r.a.createElement("span",{className:"profile-stat"},"Burns: ",r.a.createElement("span",{id:"pink"},h)," "),r.a.createElement("span",{className:"profile-stat"},"Average: ",r.a.createElement("span",{id:"pink"},O)," "),r.a.createElement("p",{className:"profile-verified"},"Verified: ",r.a.createElement("span",{id:"pink"},"false")," ")))))),r.a.createElement(S.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Polls")),r.a.createElement("div",{className:"card-body"}),r.a.createElement("ul",null,u.map(function(e){return r.a.createElement(l.b,{to:"/poll/".concat(e.address)},r.a.createElement("li",null," ",e.title," "))}))))))},ve=a(96),ge=a.n(ve);var ye=function(e){var t=e.chartId;return Object(n.useEffect)(function(){!function(){var a=e.pollRecords,n=a.yes,r=a.no;console.log(n.concat(r));var c=Q(n,r),o=Object(i.a)(c,2),l=o[0],u=o[1],m=u[0].y,p=u[u.length-1].y,d=Math.ceil((.2*p+p)/10*10),f=-1*Math.ceil((.2*m+m)/10*10),b=document.getElementById(t).getContext("2d"),E=f>d?f:d,h=b.createLinearGradient(0,337.5,0,25);h.addColorStop(1,"rgba(255,51,138,0.225)"),h.addColorStop(.7,"rgba(255,51,138,0.2)"),h.addColorStop(.5,"rgba(255,51,138,0.125)"),h.addColorStop(.2,"rgba(255,51,138,0.075)"),h.addColorStop(0,"rgba(119,52,169,0)");var v=new Date(l[0].x-216e5);v.setMinutes(0),v.setSeconds(0),v.setHours(0),l.sort(function(e,t){return e.x-t.x}),l.unshift({x:v.getTime(),y:0}),console.log(l);var g={datasets:[Object(s.a)({},I.SPLINE_STYLE(h),{data:l})]};new ge.a(b,Object(s.a)({},I.SPLINE_CONFIG(g,E)))}()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{id:t}," "))};var Oe=function(e){var t=e.chartId;return Object(n.useEffect)(function(){!function(){var a=e.pollCount,n=a.yes,r=a.no,c=document.getElementById(t).getContext("2d"),o=n>r?n:r,l=.2*o+o,i=[n,r];new ge.a(c,Object(s.a)({},I.BAR_CONFIG(i,l)))}()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{id:t}," "))};a(649);var je=function(e){var t=Object(n.useState)({yes:"",no:""}),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)({yes:0,no:0}),p=Object(i.a)(u,2),d=p[0],h=p[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),y=g[0],O=g[1],j=Object(n.useState)(!1),x=Object(i.a)(j,2),w=x[0],N=x[1],k=Object(n.useState)(0),F=Object(i.a)(k,2),I=(F[0],F[1]),D=Object(n.useState)(0),T=Object(i.a)(D,2),_=(T[0],T[1],Object(n.useState)("0x")),q=Object(i.a)(_,2),L=q[0],P=q[1],A=Object(n.useState)({}),H=Object(i.a)(A,2),W=H[0],R=H[1],M=Object(n.useState)(""),z=Object(i.a)(M,2),G=z[0],V=z[1],Y=Object(n.useState)(""),J=Object(i.a)(Y,2),U=J[0],K=J[1],Q=Object(n.useState)(""),Z=Object(i.a)(Q,2),te=Z[0],ae=Z[1],re=Object(n.useContext)(m).state,ce=Object(E.g)().address,oe=Object(E.f)(),le=void 0!==e.location?ce:e.id,se=function(){return K(!U)};function ie(t,a){var n="".concat(e.location.pathname,"/").concat(t);a&&oe[oe.length-1]!==n&&oe.push(n),V(t),se()}return Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,c,l,i,u,m,p,d;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===re.polls[le]){e.next=17;break}return t=re.polls[le],a=t.title,n=t.body,r=t.issuer,c=t.optionAaddr,l=t.optionBaddr,e.next=4,de(a);case 4:return i=e.sent,u=i.yes,m=i.users,p=i.no,e.next=8,X(m);case 8:d=e.sent,h({yes:parseInt(u),no:parseInt(p)}),o({yes:c,no:l}),P(ee(r)),I(d.voters.length),R(Object(s.a)({},d)),O(n),N(!0),ae(a);case 17:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[re.polls]),Object(n.useEffect)(function(){e.location&&(e.location.pathname.match("yes")?ie("yes",!1):e.location.pathname.match("no")&&ie("no",!1))},[]),r.a.createElement("div",{className:"poll"},r.a.createElement(S.a,null,r.a.createElement(ne,{modalOption:G,modalToggle:function(){var t=e.location.pathname.replace("/yes","");t=t.replace("/no",""),oe.push(t),se()},modalState:U,title:te,address:c}),r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement(l.b,{className:"poll-issuer",to:"/profile/".concat(L)},r.a.createElement("img",{className:"poll-profile",src:C()(L)})),r.a.createElement("div",{className:"poll-title"},te)),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"poll-description"},y),r.a.createElement("div",{className:"vote-options"},r.a.createElement("button",{type:"button",className:"btn btn-simple",onClick:function(){return ie("yes",!0)}},"Yes"),r.a.createElement("button",{type:"button",className:"btn btn-simple",onClick:function(){return ie("no",!0)}},"No")))))),r.a.createElement(S.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Results")),r.a.createElement("div",{className:"card-body"},w&&r.a.createElement(Oe,{chartId:$(le),pollCount:d}))))),r.a.createElement(S.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"History")),r.a.createElement("div",{className:"card-body"},w&&r.a.createElement(ye,{chartId:$(le),pollRecords:W}))))))};var xe=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useContext)(m).state,c=function(){var n=Object(b.a)(f.a.mark(function n(){var r,c,o,l,s;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.web3,c=a.instance,o=a.accounts,n.next=3,r.eth.getBlock("latest");case 3:return l=n.sent,s=l.timestamp+604800,n.next=7,c.methods.newVoteProposal(t.current.value,e.current.value,s).send({from:o[0]}).on("transactionHash",function(e){document.getElementsByClassName("create-poll-description")[0].value="",document.getElementsByClassName("create-poll-question")[0].value=""});case 7:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,a.web3&&r.a.createElement("div",{className:"new-poll"},r.a.createElement(S.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"}),r.a.createElement("div",{className:"card-body"},r.a.createElement(l.b,{to:"/profile/".concat(a.accounts[0])},r.a.createElement("img",{className:"new-poll-profile",src:C()(a.accounts[0])})),r.a.createElement(function(){return r.a.createElement(n.Fragment,null,r.a.createElement("input",{ref:t,name:"question",placeholder:"What question is on your mind?",className:"create-poll-question"}),r.a.createElement("textarea",{name:"description",ref:e,placeholder:"Description",className:"create-poll-description"}),r.a.createElement("button",{className:"btn btn-primary button-poll",onClick:c}," Create "))},null)))))),Object.keys(a.polls).reverse().map(function(e,t){return r.a.createElement(l.b,{to:"/poll/".concat(e)},r.a.createElement(je,{key:e,id:e}))}))};function we(){return r.a.createElement("center",null,r.a.createElement("div",{class:"page404"},r.a.createElement("h2",null," 404 not found "),r.a.createElement("label",null," Oops, looks like you've made a wrong turn...",r.a.createElement("br",null),r.a.createElement(l.b,{to:"/"}," Take me back! "))))}var Ne=Object(E.h)(function(e){var t=Object(n.useContext)(m),a=t.dispatch;return t.state,Object(n.useEffect)(function(){return window.scrollTo(0,0)},[e.location.pathname]),Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:t=e.sent,a({payload:t,type:"POLL"});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("main",null,r.a.createElement(h.a,null,r.a.createElement(V,null),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/poll/:address/:option?",component:je}),r.a.createElement(E.a,{path:"/profile/:address",component:he}),r.a.createElement(E.a,{exact:!0,path:"/",component:xe}),r.a.createElement(E.a,{path:"/logout",component:xe}),r.a.createElement(E.a,{path:"/login",component:xe}),r.a.createElement(E.a,{path:"/create",component:xe}),r.a.createElement(E.a,{path:"/about",component:xe}),r.a.createElement(E.a,null,r.a.createElement(we,null)))))});o.a.render(r.a.createElement(function(e){var t=e.children,a=Object(n.useReducer)(function(e,t){switch(t.type){case"POLL":return Object(s.a)({},e,{polls:t.payload});case"WEB3":return Object(s.a)({},e,t.payload);default:return e}},u),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement(p,{value:{state:o,dispatch:l}},t)},null,r.a.createElement(l.a,{basename:"/"},r.a.createElement(n.Fragment,null,r.a.createElement(Ne,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[269,2,1]]]);
//# sourceMappingURL=main.d80dcf61.chunk.js.map