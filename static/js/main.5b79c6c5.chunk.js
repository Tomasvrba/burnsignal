(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{240:function(e,t,a){e.exports=a.p+"static/media/logo.0a58105d.png"},243:function(e,t,a){e.exports=a(604)},250:function(e,t,a){},252:function(e,t,a){},254:function(e,t,a){},267:function(e,t){},288:function(e,t){},290:function(e,t){},359:function(e,t){},554:function(e,t){},600:function(e,t,a){},602:function(e,t,a){},604:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(233),s=a.n(c),o=a(20);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(22),i=a(10),u={polls:[],web3:void 0,auth:!1,verified:!1},d=Object(n.createContext)(u),m=d.Provider,p=a(2),f=a.n(p),b=a(14),E=a(114),v=a(607),h=(a(250),a(252),a(254),a(49)),y=a.n(h),g=a(605),N=a(606),O=a(234),j=a.n(O),x=a(235),w=a.n(x),k=a(236),C=a.n(k),S=a(237),F=a.n(S),I={walletconnect:{package:C.a,options:{infuraId:"INFURA_ID"}},authereum:{package:F.a,options:{}}},B=function(){return new Promise(function(){var e=Object(b.a)(f.a.mark(function e(t,a){var n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new w.a.Core({network:"mainnet",cacheProvider:!0,providerOptions:I}),e.next=4,n.connect();case 4:r=e.sent,c=new j.a(r),t(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}())},D=a(240),L=a.n(D);var T=function(){var e=Object(n.useState)(r.a.createElement(function(){return r.a.createElement("a",{className:"nav-link",onClick:function(){return function(){return p.apply(this,arguments)}()},href:"#"},r.a.createElement("i",{className:"nav-icon tim-icons icon-wallet-43"}))},null)),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),u=(l[0],l[1],Object(n.useContext)(d)),m=u.dispatch;function p(){return(p=Object(b.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:return t=e.sent,e.next=6,t.eth.getAccounts();case 6:a=e.sent,c(r.a.createElement(E,{account:a[0]})),m({payload:t,type:"WEB3"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert("Web3 login could not be detected");case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function E(e){var t=e.account;return r.a.createElement(o.b,{className:"nav-link",to:"/profile/".concat(t)},r.a.createElement("img",{className:"nav-profile",src:y()(t)}),r.a.createElement("i",{className:"nav-login-icon tim-icons icon-minimal-down"}))}return u.state,r.a.createElement(g.a,null,r.a.createElement(N.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("nav",{className:"navbar navbar-expand-lg fixed-top col-sm-12 col-md-7"},r.a.createElement("div",{className:"navbar-wrapper"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{className:"navbar-logo",src:L.a}),r.a.createElement("span",{className:"navbar-title"}," Burn Signal "))),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.b,{className:"nav-link",to:"/"},r.a.createElement("i",{className:"nav-icon tim-icons icon-bell-55"}))),r.a.createElement("li",{className:"nav-item"},a))))))},A=a(117),W=a(124),P=function(e){return Object(A.a)(e.substring(0,10)).reduceRight(function(e,t,a,n){return[].concat(Object(A.a)(e),[n.splice(~~(Math.random()*n.length),1)[0]])},[]).join("")},H=function(e){return parseInt(e)>=1e15?"".concat(parseFloat(e/Math.pow(10,18)).toFixed(3)," ETH"):parseInt(e)>=1e6?"".concat((e/1e9).toFixed(3)," GWEI"):parseInt(e)<1e6?"".concat(parseFloat(e).toFixed(2)," WEI"):void 0},M=function(e,t){var a=e.concat(t);return a.sort(function(e,t){return e-t}),a.unshift(0),a},R=function(){var e=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={yes:[],no:[],voters:[]},e.next=3,Object.entries(t).map(function(e){var t=Object(i.a)(e,2),n=(t[0],t[1]),r=n.address,c=n.yes,s=n.no;a.voters.push(r),c.value.forEach(function(e,t){e=parseFloat(e),isNaN(e)&&(e=0),a.yes.push(e)}),s.value.forEach(function(e,t){e=-1*parseFloat(e),isNaN(e)&&(e=0),a.no.push(e)})});case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_=function(e){return"-"===(e=(e=e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")).replace(/ /g,"-").toLowerCase()).substring(e.length-1,e.length)&&(e=e.slice(0,e.length-1)),e.replace("?","")},z=function(e){e=e.toLowerCase().replace("0x","");for(var t=Object(W.keccak_256)(e),a="0x",n=0;n<e.length;n++)parseInt(t[n],16)>=8?a+=e[n].toUpperCase():a+=e[n];return a};var G=a(594);var Y=function(e){var t="".concat(_(e.title),".burnsignal.eth"),a=Object(n.useContext)(d).state;function c(a){var n=a.option;return r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:e.dismiss},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},"Vote ",r.a.createElement("span",{id:"pink"},n)," by sending any amount of ETH to ",r.a.createElement("br",null),r.a.createElement("a",{href:"https://etherscan.io"},r.a.createElement("span",{id:"pink"},n),".",t),r.a.createElement("div",{className:"poll-qr"},r.a.createElement(G,{value:e.address[n]})),"To ensure that you vote counts, please link your ethereum account to your BrightID account at\u2028 ",r.a.createElement("a",{href:"https://ethereum.brightid.org"},"ethereum.brightid.org")))}function s(t){var a=t.option;return r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:e.dismiss},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("span",{className:"vote-selection"}," How much ETH will you burn to cast your vote? "),r.a.createElement("input",{className:"modal-input",placeholder:"0.5 ETH"})),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-verify","data-dismiss":"modal"},"Vote ",a)))}function o(){return r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"Please verify your account"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:e.dismiss},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},"Before casting your vote, you should verify your Ethereum account using BrightID."),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-verify","data-dismiss":"modal"},"Verify")))}return e.title,r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal fade",id:"yes",tabIndex:"-1",role:"dialog","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},a.auth&&a.verified&&r.a.createElement(s,{option:"yes"}),!a.auth&&!a.verified&&r.a.createElement(c,{option:"yes"}),a.auth&&!a.verified&&r.a.createElement(o,null))),r.a.createElement("div",{className:"modal fade",id:"no",tabIndex:"-1",role:"dialog","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},a.auth&&a.verified&&r.a.createElement(s,{option:"no"}),!a.auth&&!a.verified&&r.a.createElement(c,{option:"no"}),a.auth&&!a.verified&&r.a.createElement(o,null))))},q=function(e){return'{ polls(where: { id: "'.concat(e,'" }) { yes no users { address yes { contributions timestamps total value sqrt } no { contributions timestamps total value sqrt } } } }')},V='{ issues(where: { title_not_contains: "fae" }) { id body title issuer deadline optionBaddr optionAaddr } }',J=function(e){return'{ user(id: "'.concat(e.toLowerCase(),'") { burns polls burned } }')},U=function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.thegraph.com/subgraphs/name/burnsignal/proof-of-concept",Object(l.a)({},(a=t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:a})}))).then(function(e){return e.json()}).then(function(e){return e}).catch(console.log);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}();function $(){return K.apply(this,arguments)}function K(){return(K=Object(b.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(V);case 2:return t=e.sent,a={},t.data.issues.forEach(function(e){a[_(e.title)]=Object(l.a)({},e)}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(q(t));case 2:if(0!=(a=e.sent).data.polls.length){e.next=7;break}return e.abrupt("return",{yes:0,no:0,users:[]});case 7:return e.abrupt("return",a.data.polls[0]);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(J(t));case 2:if(null!==(a=e.sent).data.user){e.next=7;break}return e.abrupt("return",{burned:0,polls:[],burns:[]});case 7:return e.abrupt("return",a.data.user);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}a(600);var te=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),l=Object(i.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)(0),p=Object(i.a)(m,2),v=p[0],h=p[1],O=Object(n.useState)(0),j=Object(i.a)(O,2),x=j[0],w=j[1],k=Object(E.f)().address;return Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(k);case 2:t=e.sent,a=t.burned,n=t.polls,r=t.burns,w(H(parseInt(a)/r.length)),h(r.length),c(H(a)),d(n);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("div",{className:"profileComponent"},r.a.createElement(g.a,null,r.a.createElement(N.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("img",{className:"profile-blockie",src:y()(k)}),r.a.createElement("div",{className:"profile-stats"},r.a.createElement("div",{className:"profile-address"},r.a.createElement("a",{href:"https://etherscan.io/address/".concat(k)},z(k))),r.a.createElement("span",{className:"profile-stat"},"Burned: ",r.a.createElement("span",{id:"pink"},a)," "),r.a.createElement("span",{className:"profile-stat"},"Burns: ",r.a.createElement("span",{id:"pink"},v)," "),r.a.createElement("span",{className:"profile-stat"},"Average: ",r.a.createElement("span",{id:"pink"},x)," "),r.a.createElement("p",{className:"profile-verified"},"Verified: ",r.a.createElement("span",{id:"pink"},"false")," ")))))),r.a.createElement(g.a,null,r.a.createElement(N.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Polls")),r.a.createElement("div",{className:"card-body"}),r.a.createElement("ul",null,u.map(function(e){return r.a.createElement(o.b,{to:"/poll/".concat(_(e))},r.a.createElement("li",null," ",e," "))}))))))},ae=a(119),ne=a.n(ae),re=["Monday","Tuesday","Wendsday","Thursday","Friday","Saturday","Sunday"],ce={BAR_CONFIG:function(e,t){return{type:"horizontalBar",responsive:!0,data:{labels:["Yes","No"],datasets:[{data:e,borderColor:"#d048b6",borderWidth:2,fill:!0}]},options:{legend:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Wei (ETH)"},ticks:{suggestedMin:0,max:t,callback:function(e,t,a){return e>1e8||e<-1e8?e.toExponential():e}}}]}}}},SPLINE_CONFIG:function(e,t){return{options:{lineTension:100,bezierCurve:!0,legend:{display:!1},scales:{yAxes:[{id:"yAxis1",scaleLabel:{labelString:"Wei (ETH)",display:!0},ticks:{min:-1*t,max:t,callback:function(e,t,a){return e>1e8||e<-1e8?e.toExponential():e}}},{id:"yAxis2",labels:["","Yes","","No",""],type:"category",gridLines:{drawOnChartArea:!1,display:!1}}]}},type:"line",data:e}},SPLINE_STYLE:function(e){return{label:"Data",fill:!0,backgroundColor:e,borderColor:"#d048b6",borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:"#d048b6",pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:"#d048b6",pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4}}},se=function(e,t){var a;return(a=[]).concat.apply(a,Object(A.a)(Array.from({length:t},function(){return e})))};var oe=function(e){var t=e.chartId;return Object(n.useEffect)(function(){!function(){var a=e.pollRecords,n=a.yes,r=a.no,c=M(n,r),s=Math.max.apply(Math,Object(A.a)(c)),o=Math.min.apply(Math,Object(A.a)(c)),i=Math.ceil((.2*s+s)/10*10),u=-1*Math.ceil((.2*o+o)/10*10),d=document.getElementById(t).getContext("2d"),m=u>i?u:i,p=c.length>re.length?se(re,parseInt(c.length/re.length)):re.slice(0,c.length),f=d.createLinearGradient(0,337.5,0,25);f.addColorStop(1,"rgba(255,51,138,0.225)"),f.addColorStop(.7,"rgba(255,51,138,0.2)"),f.addColorStop(.5,"rgba(255,51,138,0.125)"),f.addColorStop(.2,"rgba(255,51,138,0.075)"),f.addColorStop(0,"rgba(119,52,169,0)");var b={labels:p,datasets:[Object(l.a)({},ce.SPLINE_STYLE(f),{data:c})]};new ne.a(d,Object(l.a)({},ce.SPLINE_CONFIG(b,m)))}()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{id:t}," "))};var le=function(e){var t=e.chartId;return Object(n.useEffect)(function(){!function(){var a=e.pollCount,n=a.yes,r=a.no,c=document.getElementById(t).getContext("2d"),s=n>r?n:r,o=.2*s+s,i=[n,r];new ne.a(c,Object(l.a)({},ce.BAR_CONFIG(i,o)))}()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{id:t}," "))};a(602);var ie=function(e){var t=Object(n.useState)({yes:[],no:[]}),a=Object(i.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)({yes:"",no:""}),m=Object(i.a)(u,2),p=m[0],v=m[1],h=Object(n.useState)({yes:0,no:0}),O=Object(i.a)(h,2),j=O[0],x=O[1],w=Object(n.useState)(""),k=Object(i.a)(w,2),C=k[0],S=k[1],F=Object(n.useState)(!1),I=Object(i.a)(F,2),B=I[0],D=I[1],L=Object(n.useState)(0),T=Object(i.a)(L,2),A=(T[0],T[1]),W=Object(n.useState)(0),H=Object(i.a)(W,2),M=(H[0],H[1],Object(n.useState)("0x")),_=Object(i.a)(M,2),G=_[0],q=_[1],V=Object(n.useState)(""),J=Object(i.a)(V,2),U=J[0],$=J[1],K=Object(n.useContext)(d).state,X=Object(E.f)().address,Z=Object(E.e)(),ee=void 0!==e.location?X:e.id;function te(e){var t="/poll/".concat(ee,"/").concat(e);Z[Z.length-1]!==t&&Z.push(t)}return Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,c,o,i,u,d,m,p;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===K.polls[ee]){e.next=17;break}return t=K.polls[ee],a=t.title,n=t.body,r=t.issuer,c=t.optionAaddr,o=t.optionBaddr,e.next=4,Q(a);case 4:return i=e.sent,u=i.yes,d=i.users,m=i.no,e.next=8,R(d);case 8:p=e.sent,x({yes:parseInt(u),no:parseInt(m)}),v({yes:c,no:o}),q(z(r)),A(p.voters.length),s(Object(l.a)({},p)),S(n),D(!0),$(a);case 17:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[K.polls]),r.a.createElement("div",{className:"proposalComponent"},r.a.createElement(g.a,null,r.a.createElement(N.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement(o.b,{className:"poll-issuer",to:"/profile/".concat(G)},r.a.createElement("img",{className:"poll-profile",src:y()(G)})),r.a.createElement("div",{className:"poll-title"},U)),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"poll-description"},C),r.a.createElement("div",{className:"vote-options"},r.a.createElement("button",{type:"button","data-target":"#yes","data-toggle":"modal",className:"btn btn-primary btn-simple",onClick:function(){return te("yes")}},"Yes"),r.a.createElement("button",{type:"button","data-target":"#no","data-toggle":"modal",className:"btn btn-primary btn-simple",onClick:function(){return te("no")}},"No")))))),r.a.createElement(g.a,null,r.a.createElement(N.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Results")),r.a.createElement("div",{className:"card-body"},B&&r.a.createElement(le,{chartId:P(ee),pollCount:j}))))),r.a.createElement(g.a,null,r.a.createElement(N.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"History")),r.a.createElement("div",{className:"card-body"},B&&r.a.createElement(oe,{chartId:P(ee),pollRecords:c})))),r.a.createElement(Y,{dismiss:function(){var t=e.location.pathname.replace("/yes","");t=t.replace("/no",""),Z.push(t)},title:U,address:p})))};var ue=function(){var e=Object(n.useContext)(d).state;return r.a.createElement(n.Fragment,null,Object.keys(e.polls).map(function(e,t){return r.a.createElement(o.b,{to:"/poll/".concat(e)},r.a.createElement(ie,{key:e,id:e}))}))};var de=Object(E.g)(function(e){var t=Object(n.useContext)(d),a=t.dispatch;return t.state,Object(n.useEffect)(function(){return window.scrollTo(0,0)},[e.location.pathname]),Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:t=e.sent,a({payload:t,type:"POLL"});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("main",null,r.a.createElement(v.a,null,r.a.createElement(T,null),r.a.createElement(E.a,{path:"/profile/:address",component:te}),r.a.createElement(E.a,{path:"/poll/:address",component:ie}),r.a.createElement(E.a,{exact:!0,path:"/",component:ue})))});s.a.render(r.a.createElement(function(e){var t=e.children,a=Object(n.useReducer)(function(e,t){switch(t.type){case"POLL":return Object(l.a)({},e,{polls:t.payload});case"WEB3":return Object(l.a)({},e,{web3:t.payload,auth:!0});default:return e}},u),c=Object(i.a)(a,2),s=c[0],o=c[1];return r.a.createElement(m,{value:{state:s,dispatch:o}},t)},null,r.a.createElement(o.a,{basename:"/"},r.a.createElement(n.Fragment,null,r.a.createElement(de,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[243,2,1]]]);
//# sourceMappingURL=main.5b79c6c5.chunk.js.map