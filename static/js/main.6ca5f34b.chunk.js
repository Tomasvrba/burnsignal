(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{265:function(e,t,a){e.exports=a.p+"static/media/logo.0a58105d.png"},269:function(e,t,a){e.exports=a(653)},276:function(e,t,a){},278:function(e,t,a){},280:function(e,t,a){},282:function(e,t,a){},284:function(e,t,a){},286:function(e,t,a){},299:function(e,t){},320:function(e,t){},322:function(e,t){},391:function(e,t){},586:function(e,t){},653:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(62),o=a.n(c),l=a(21);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(25),i=a(11),u={polls:[],web3:void 0,auth:!1,verified:!1},m=Object(n.createContext)(u),p=m.Provider,d=a(3),f=a.n(d),b=a(13),E=a(133),h=a(658),v=(a(276),a(278),a(280),a(282),a(284),a(286),a(52)),g=a(654),y=a(662),O=a(655),j=a(656),w=a(657),x=a(661),N=a(663),k=a(664),C=a(41),S=a.n(C),F=a(659),B=a(660),I="0x61a8598eabb7bddca95d3783c228878cd788e0a9",D={BAR_CONFIG:function(e,t){return{type:"horizontalBar",responsive:!0,data:{labels:["Yes","No"],datasets:[{data:e,borderColor:"#d048b6",borderWidth:2,fill:!0}]},options:{legend:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Wei (ETH)"},ticks:{suggestedMin:0,callback:function(e,t,a){return e>1e8||e<-1e8?e.toExponential():e}}}]}}}},SPLINE_CONFIG:function(e,t){var a={};return{options:{lineTension:100,bezierCurve:!0,legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:"millisecond",unitStepSize:216e5,displayFormats:{millisecond:"MMM D"}},ticks:{callback:function(e,t,n){return void 0===a[e]||0==t?a[e]=!0:e="",e}}}],yAxes:[{id:"yAxis1",scaleLabel:{labelString:"Wei (ETH)",display:!0},ticks:{min:-1*t,max:t,callback:function(e,t,a){return e>1e8||e<-1e8?e.toExponential():e}}},{id:"yAxis2",labels:["","Yes","","No",""],type:"category",gridLines:{drawOnChartArea:!1,display:!1}}]}},type:"line",data:e}},SPLINE_STYLE:function(e){return{label:"Data",fill:!0,backgroundColor:e,borderColor:"#d048b6",borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:"#d048b6",pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:"#d048b6",pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4}}},_=[{constant:!1,inputs:[{name:"_name",type:"string"},{name:"_data",type:"string"},{name:"_deadline",type:"uint64"}],name:"newVoteProposal",outputs:[{name:"newProposal",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"proposal",type:"address"},{indexed:!1,name:"issuer",type:"address"},{indexed:!1,name:"deadline",type:"uint256"},{indexed:!1,name:"name",type:"string"},{indexed:!1,name:"data",type:"string"},{indexed:!1,name:"optionA",type:"string"},{indexed:!1,name:"optionAaddr",type:"address"},{indexed:!1,name:"optionB",type:"string"},{indexed:!1,name:"optionBaddr",type:"address"}],name:"newProposalIssued",type:"event"}],T=a(259),q=a.n(T),L=a(260),P=a.n(L),A=a(261),W=a.n(A),H=a(262),R=a.n(H),M={walletconnect:{package:W.a,options:{infuraId:"INFURA_ID"}},authereum:{package:R.a,options:{}}},z=function(){return new Promise(function(){var e=Object(b.a)(f.a.mark(function e(t,a){var n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new P.a.Core({network:"mainnet",cacheProvider:!0,providerOptions:M}),e.next=4,n.connect();case 4:r=e.sent,c=new q.a(r),t(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}())},G=a(265),V=a.n(G);var Y=Object(E.h)(function(e){var t=Object(n.useState)({route:!1,create:!1,about:!1,network:!1}),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)({question:!1,description:!1}),p=Object(i.a)(u,2),d=(p[0],p[1],Object(n.useState)(r.a.createElement(ne,null))),C=Object(i.a)(d,2),D=C[0],T=C[1],q=Object(n.useState)(!1),L=Object(i.a)(q,2),P=L[0],A=L[1],W=Object(n.useState)(r.a.createElement(n.Fragment,null)),H=Object(i.a)(W,2),R=H[0],M=H[1],G=Object(n.useState)(""),Y=Object(i.a)(G,2),J=(Y[0],Y[1],Object(n.useRef)(null)),U=Object(n.useRef)(null),$=Object(n.useContext)(m),K=$.dispatch,Q=$.state,X=Object(E.f)();function Z(){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(f.a.mark(function e(){var t,a,n,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:return t=e.sent,e.next=6,t.eth.getAccounts();case 6:return a=e.sent,e.next=9,t.eth.net.getId();case 9:n=e.sent,l=new t.eth.Contract(_,I),4!==n&&o(Object(s.a)({},c,{network:!0})),T(r.a.createElement(re,{account:a[0]})),M(r.a.createElement(ce,{account:a[0]})),K({payload:{web3:t,accounts:a,instance:l,auth:!0,verified:!0},type:"WEB3"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),alert("Web3 login could not be detected");case 20:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function te(e,t){var a;t||window.history.pushState({},window.title,"/#/".concat(e)),o(Object(s.a)({},c,(a={},Object(v.a)(a,e,!0),Object(v.a)(a,"route",t),a)))}function ae(e){var t;c.route?X.push("/"):X.goBack(),o(Object(s.a)({},c,(t={},Object(v.a)(t,e,!1),Object(v.a)(t,"route",!1),t)))}function ne(){return r.a.createElement(l.b,{to:"/login"},r.a.createElement(g.a,null,"Login"))}function re(e){var t=e.account;return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{type:"button",onClick:function(){return te("create")}}," Create "),r.a.createElement(l.b,{to:"/profile/".concat(t)},r.a.createElement(g.a,null," Profile ")),r.a.createElement(l.b,{to:"/logout"},r.a.createElement(g.a,null,"Logout")))}function ce(e){var t=e.account;return r.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(t)},r.a.createElement("img",{className:"nav-profile",src:S()(t)}))}var oe=function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q.web3,a=Q.instance,n=Q.accounts,e.next=3,t.eth.getBlock("latest");case 3:return r=e.sent,c=r.timestamp+604800,e.next=7,a.methods.newVoteProposal(U.current.value,J.current.value,c).send({from:n[0]}).on("transactionHash",function(e){ae("create"),document.getElementsByClassName("create-poll-description")[0].value="",document.getElementsByClassName("create-poll-question")[0].value=""});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){!function(){var t=Object(b.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.location&&(e.location.pathname.match("about")?te("about",!0):e.location.pathname.match("create")?te("create",!0):e.location.pathname.match("login")?(Z(),X.push("/")):e.location.pathname.match("logout")&&(K({payload:{web3:!1,auth:!1,verified:!1},type:"WEB3"}),T(r.a.createElement(ne,null)),M(r.a.createElement(n.Fragment,null)),X.push("/")));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[]),r.a.createElement("nav",{className:"fixed-top"},r.a.createElement(h.a,null,r.a.createElement(F.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"navbar navbar-expand-lg"},r.a.createElement("div",{className:"navbar-wrapper"},r.a.createElement(l.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{className:"navbar-logo",src:V.a}),r.a.createElement("span",{className:"navbar-title"}," Burn Signal "))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},R,r.a.createElement(x.a,{isOpen:P,toggle:function(){return A(function(e){return!e})}},r.a.createElement(N.a,{caret:!0},r.a.createElement("i",{className:"nav-login-icon tim-icons icon-minimal-down"})),r.a.createElement(k.a,null,r.a.createElement(l.b,{to:"/"},r.a.createElement(g.a,null," Home ")),D,r.a.createElement(g.a,{divider:!0}),r.a.createElement(g.a,{type:"button",onClick:function(){return te("about")}},"About"),r.a.createElement(g.a,{target:"_",href:"https://blog.burnsignal.io"},"Blog")))))))),r.a.createElement(function(){return r.a.createElement(y.a,{isOpen:c.network},r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title align-left"},"Incorrect Network")),r.a.createElement(j.a,null,"Your web3 provider is on the incorrect network, please change to Rinkeby testnet to proceed."),r.a.createElement(w.a,null))},null),r.a.createElement(function(){return r.a.createElement(y.a,{isOpen:c.create},r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title align-left"},"Create"),r.a.createElement("button",{type:"button",className:"close",onClick:function(){return ae("create")}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,r.a.createElement("input",{name:"question",ref:U,placeholder:"What question is on your mind?",className:"create-poll-question"}),r.a.createElement("textarea",{name:"description",ref:J,placeholder:"Description",className:"create-poll-description"}),r.a.createElement("button",{className:"btn btn-primary button-poll",onClick:oe}," Create ")),r.a.createElement(w.a,null))},null),r.a.createElement(function(){return r.a.createElement(y.a,{isOpen:c.about},r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title align-left"},"About"),r.a.createElement("button",{type:"button",className:"close",onClick:function(){return ae("about")}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,r.a.createElement("p",null,"Burn Signal is an experiment in distributed preference signaling where verified unique users burn ETH to signal their opinion."),r.a.createElement("p",null,"Votes are weighted quadratically."),r.a.createElement("p",null,"We use ",r.a.createElement("a",{id:"pink",target:"_",href:"https://brightid.org"},"BrightID")," as our proof of uniqueness, only votes cast by ethereum addresses that are verified unique by BrightID count towards the outcome of a burn signals."),r.a.createElement("br",null),r.a.createElement("p",null,"Burn Signal is funded by grants and community contributions. If you would like to contribute funds, check out our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://gitcoin.co/grants/138/burner-vote"},"Gitcoin Grants campaign"),", if you would like to contribute code or other work, check out our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://github.com/burnsignal"},"GitHub")," and our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://colony.io/colony/burn"},"Colony"),"."),r.a.createElement("br",null),r.a.createElement("p",null,"Check out our ",r.a.createElement("a",{id:"pink",target:"_",href:"https://blog.burnsignal.io"}," blog ")," for more information.")),r.a.createElement(w.a,null))},null)))}),J=a(78),U=a(141),$=function(e){return Object(J.a)(e.substring(0,10)).reduceRight(function(e,t,a,n){return[].concat(Object(J.a)(e),[n.splice(~~(Math.random()*n.length),1)[0]])},[]).join("")},K=function(e){return parseInt(e)>=1e15?"".concat(parseFloat(e/Math.pow(10,18)).toFixed(3)," ETH"):parseInt(e)>=1e6?"".concat((e/1e9).toFixed(0)," GWEI"):parseInt(e)<1e6?"".concat(parseFloat(e).toFixed(0)," WEI"):void 0},Q=function(e,t){var a=e.concat(t),n=0;for(a.sort(function(e,t){return e.x-t.x});n<a.length;){var r=a[n];if(0!=n){var c=a[n-1];if(r.x-c.x<=48e5){var o=r.y+c.y,l=r.x;a[n-1]={x:l,y:o},a.splice(n,1),n--}else n++}else n++}var s=a;return s.sort(function(e,t){return e.y-t.y}),[a,s]},X=function(){var e=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={yes:[],no:[],voters:[]},e.next=3,Object.entries(t).map(function(){var e=Object(b.a)(f.a.mark(function e(t){var n,r,c,o,l,s,u;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.a)(t,2),n[0],r=n[1],c=r.address,o=r.yes,l=r.no,e.next=4,Z(o,"yes",[]);case 4:return s=e.sent,e.next=7,Z(l,"no",[]);case 7:u=e.sent,Object.assign(a.yes,a.yes.concat(s)),Object.assign(a.no,a.no.concat(u)),a.voters.push(c);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Z=function(e,t,a){return new Promise(function(n){e.value.forEach(function(n,r){var c=e.timestamps[r],o=parseFloat(n);"no"===t&&(o*=-1),isNaN(o)&&(o=0),a.push({x:1e3*c,y:o})}),n(a)})},ee=function(e){e=e.toLowerCase().replace("0x","");for(var t=Object(U.keccak_256)(e),a="0x",n=0;n<e.length;n++)parseInt(t[n],16)>=8?a+=e[n].toUpperCase():a+=e[n];return a};var te=function(e){return"-"===(e=(e=e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")).replace(/ /g,"-").toLowerCase()).substring(e.length-1,e.length)&&(e=e.slice(0,e.length-1)),e.replace("?","")},ae=a(647);var ne=function(e){var t="".concat(te(e.title),".burnsignal.eth"),a=Object(n.useRef)(null),c=Object(n.useContext)(m).state;e.title;var o=function(){var t=Object(b.a)(f.a.mark(function t(n){var r,o;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.web3,o=a.current.value%1===0?r.utils.toBN(parseFloat(a.current.value)).mul(r.utils.toBN(1e18)):parseInt(a.current.value*Math.pow(10,18)),t.next=4,r.eth.sendTransaction({to:e.address[n],from:c.accounts[0],value:o}).on("transactionHash",function(){e.modalToggle()});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{isOpen:e.modalState},c.web3&&c.verified&&r.a.createElement(function(t){var c=t.option;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close",onClick:e.modalToggle},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,r.a.createElement("span",{className:"vote-selection"}," How much ETH will you burn to cast your vote? "),r.a.createElement("input",{type:"number",ref:a,className:"modal-input",placeholder:"0.5 ETH"})),r.a.createElement(w.a,null,r.a.createElement("button",{type:"button",className:"btn btn-primary btn-verify","data-dismiss":"modal",onClick:function(){return o(c)}},"Vote ",c)))},{option:e.modalOption}),!c.web3&&!c.verified&&r.a.createElement(function(a){var c=a.option;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close",onClick:e.modalToggle},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,{className:"align-center"},"Vote ",r.a.createElement("span",{id:"pink"},c)," by sending any amount of ETH to ",r.a.createElement("br",null),r.a.createElement("a",{target:"_",href:"https://etherscan.io"},r.a.createElement("span",{id:"pink"},c),".",t),r.a.createElement("div",{className:"poll-qr"},r.a.createElement(ae,{value:e.address[c]})),"To ensure that you vote counts, please link your ethereum account to your BrightID account at\u2028 ",r.a.createElement("a",{target:"_",href:"https://ethereum.brightid.org"},"ethereum.brightid.org")))},{option:e.modalOption}),c.web3&&!c.verified&&r.a.createElement(function(){return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h5",{className:"modal-title"},"Please verify your account"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:e.dismiss},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(j.a,null,"Before casting your vote, you should verify your Ethereum account using BrightID."),r.a.createElement(w.a,null,r.a.createElement("button",{type:"button",className:"btn btn-primary btn-verify","data-dismiss":"modal"},"Verify")))},null)))},re=function(){var e=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.coinmarketcap.com/v1/ticker/ethereum/",{method:"GET"}).then(function(e){return e.json()}).then(function(e){return e}).catch(console.log);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ce=function(e){return'{ polls(where: { id: "'.concat(e,'" }) { yes no users { address yes { contributions timestamps total value sqrt } no { contributions timestamps total value sqrt } } } }')},oe='{ issues(where: { title_not_contains: "question" }) { id poll body title issuer deadline optionBaddr optionAaddr } }',le=function(e){return'{ issues(where: { title: "'.concat(e,'" }) { poll } }')},se=function(e){return'{ user(id: "'.concat(e.toLowerCase(),'") { burns polls burned } }')},ie=function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.thegraph.com/subgraphs/name/burnsignal/proof-of-concept",Object(s.a)({},(a=t,{method:"POST",body:JSON.stringify({query:a})}))).then(function(e){return e.json()}).then(function(e){return e}).catch(console.log);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}();function ue(){return me.apply(this,arguments)}function me(){return(me=Object(b.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(oe);case 2:return t=e.sent,a={},t.data.issues.reverse().forEach(function(e){a[e.poll]=Object(s.a)({},e)}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(e){return de.apply(this,arguments)}function de(){return(de=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(le(t));case 2:if(0!=(a=e.sent).data.issues.length){e.next=7;break}return e.abrupt("return",{id:""});case 7:return e.abrupt("return",a.data.issues[0].poll);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(ce(t));case 2:if(0!=(a=e.sent).data.polls.length){e.next=7;break}return e.abrupt("return",{yes:0,no:0,users:[]});case 7:return e.abrupt("return",a.data.polls[0]);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e){return he.apply(this,arguments)}function he(){return(he=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(se(t));case 2:if(null!==(a=e.sent).data.user){e.next=7;break}return e.abrupt("return",{burned:0,polls:[],burns:[]});case 7:return e.abrupt("return",a.data.user);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ve=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),u=s[0],m=s[1],p=Object(n.useState)(0),d=Object(i.a)(p,2),h=d[0],v=d[1],g=Object(n.useState)(0),y=Object(i.a)(g,2),O=y[0],j=y[1],w=Object(E.g)().address;return Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,o,l,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(w);case 2:t=e.sent,a=[],n=t.burned,r=t.polls,o=t.burns,l=0;case 6:if(!(l<r.length)){e.next=14;break}return e.next=9,pe(r[l]);case 9:s=e.sent,"question"!=r[l]&&a.push({address:s,title:r[l]});case 11:l++,e.next=6;break;case 14:j(K(parseInt(n)/o.length)),v(o.length),c(K(n)),m(a);case 18:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("div",{className:"profile"},r.a.createElement(F.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement(l.b,{to:"/profile/".concat(w)},r.a.createElement("img",{className:"profile-blockie",src:S()(w)}),r.a.createElement("div",{className:"profile-address"},r.a.createElement("a",{href:"https://etherscan.io/address/".concat(w)},ee(w)))),r.a.createElement("div",{className:"profile-stats"},r.a.createElement("span",{className:"profile-stat"},"Burned: ",r.a.createElement("span",{id:"pink"},a)," "),r.a.createElement("span",{className:"profile-stat"},"Burns: ",r.a.createElement("span",{id:"pink"},h)," "),r.a.createElement("span",{className:"profile-stat"},"Average: ",r.a.createElement("span",{id:"pink"},O)," "),r.a.createElement("p",{className:"profile-verified"},"Verified: ",r.a.createElement("span",{id:"pink"},"false")," ")))))),r.a.createElement(F.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Polls")),r.a.createElement("div",{className:"card-body"}),r.a.createElement("ul",null,u.map(function(e){return r.a.createElement(l.b,{to:"/poll/".concat(e.address)},r.a.createElement("li",null," ",e.title," "))}))))))},ge=a(96),ye=a.n(ge);var Oe=function(e){var t=e.chartId;return Object(n.useEffect)(function(){!function(){var a=e.pollRecords,n=a.yes,r=a.no,c=Q(n,r),o=Object(i.a)(c,2),l=o[0],u=o[1],m=0!=u.length?u[0].y:0,p=0!=u.length?u[u.length-1].y:0,d=-1*Math.ceil((.2*m+m)/10*10),f=Math.ceil((.2*p+p)/10*10),b=document.getElementById(t).getContext("2d"),E=d>f?d:f,h=b.createLinearGradient(0,337.5,0,25);h.addColorStop(1,"rgba(255,51,138,0.225)"),h.addColorStop(.7,"rgba(255,51,138,0.2)"),h.addColorStop(.5,"rgba(255,51,138,0.125)"),h.addColorStop(.2,"rgba(255,51,138,0.075)"),h.addColorStop(0,"rgba(119,52,169,0)"),l.sort(function(e,t){return e.x-t.x});var v=0!=l.length?l[0].x-48e5:Date.now(),g=new Date(v);g.setMinutes(0),g.setSeconds(0),l.unshift({x:g.getTime(),y:0}),l.sort(function(e,t){return e.x-t.x}),console.log(l);var y={datasets:[Object(s.a)({},D.SPLINE_STYLE(h),{data:l})]};new ye.a(b,Object(s.a)({},D.SPLINE_CONFIG(y,E)))}()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{id:t}," "))};var je=function(e){var t=e.chartId;return Object(n.useEffect)(function(){!function(){var a=e.pollCount,n=a.yes,r=a.no,c=document.getElementById(t).getContext("2d"),o=n>r?n:r,l=.2*o+o,i=[n,r];new ye.a(c,Object(s.a)({},D.BAR_CONFIG(i,l)))}()},[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{id:t}," "))};var we=function(e){var t=Object(n.useState)({yes:"",no:""}),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)({yes:0,no:0}),p=Object(i.a)(u,2),d=p[0],h=p[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),y=g[0],O=g[1],j=Object(n.useState)(!1),w=Object(i.a)(j,2),x=w[0],N=w[1],k=Object(n.useState)(0),C=Object(i.a)(k,2),I=C[0],D=C[1],_=Object(n.useState)(0),T=Object(i.a)(_,2),q=T[0],L=T[1],P=Object(n.useState)("0x"),A=Object(i.a)(P,2),W=A[0],H=A[1],R=Object(n.useState)({}),M=Object(i.a)(R,2),z=M[0],G=M[1],V=Object(n.useState)(""),Y=Object(i.a)(V,2),J=Y[0],U=Y[1],Q=Object(n.useState)(""),Z=Object(i.a)(Q,2),te=Z[0],ae=Z[1],re=Object(n.useState)(""),ce=Object(i.a)(re,2),oe=ce[0],le=ce[1],se=Object(n.useState)(0),ie=Object(i.a)(se,2),ue=ie[0],me=ie[1],pe=Object(n.useContext)(m).state,de=Object(E.g)().address,be=Object(E.f)(),Ee=void 0!==e.location?de:e.id,he=function(){return ae(!te)};function ve(t,a){var n="".concat(e.location.pathname,"/").concat(t);a&&be[be.length-1]!==n&&be.push(n),U(t),he()}return Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,a,n,r,c,l,i,u,m,p,d,b,E,v;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===pe.polls[Ee]){e.next=22;break}return t=pe.polls[Ee],a=t.title,n=t.body,r=t.issuer,c=t.optionAaddr,l=t.optionBaddr,e.next=4,fe(a);case 4:return i=e.sent,u=i.yes,m=i.users,p=i.no,d=parseInt(u)+parseInt(p),b=pe.price*d/Math.pow(10,18),e.next=10,X(m);case 10:E=e.sent,v=K(d),h({yes:parseInt(u),no:parseInt(p)}),o({yes:c,no:l}),H(ee(r)),D(E.voters.length),me(b.toFixed(2)),G(Object(s.a)({},E)),O(n),N(!0),L(v),le(a);case 22:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[pe.polls]),Object(n.useEffect)(function(){e.location&&(e.location.pathname.match("yes")?ve("yes",!1):e.location.pathname.match("no")&&ve("no",!1))},[]),r.a.createElement("div",{className:"poll"},r.a.createElement(F.a,null,r.a.createElement(ne,{modalOption:J,modalToggle:function(){var t=e.location.pathname.replace("/yes","");t=t.replace("/no",""),be.push(t),he()},modalState:te,title:oe,address:c}),r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement(l.b,{className:"poll-issuer",to:"/profile/".concat(W)},r.a.createElement("img",{className:"poll-profile",src:S()(W)})),r.a.createElement("div",{className:"poll-title"},oe)),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"poll-description"},y),r.a.createElement("div",{className:"vote-options"},r.a.createElement("button",{type:"button",className:"btn btn-simple",onClick:function(){return ve("yes",!0)}},"Yes"),r.a.createElement("button",{type:"button",className:"btn btn-simple",onClick:function(){return ve("no",!0)}},"No")))))),r.a.createElement(F.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Results")),r.a.createElement("div",{className:"card-body"},x&&r.a.createElement(je,{chartId:$(Ee),pollCount:d}))))),r.a.createElement(F.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-category"},"Details")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{class:"poll-details"},r.a.createElement("i",{id:"pink",className:"tim-icons icon-single-02"}),"\xa0\xa0",I,r.a.createElement("i",{id:"pink",className:"tim-icons icon-wallet-43"}),"\xa0\xa0",q,"\xa0\xa0|\xa0\xa0$",ue),x&&r.a.createElement(Oe,{chartId:$(Ee),pollRecords:z}))))))};var xe=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useContext)(m).state,c=function(){var n=Object(b.a)(f.a.mark(function n(){var r,c,o,l,s;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.web3,c=a.instance,o=a.accounts,n.next=3,r.eth.getBlock("latest");case 3:return l=n.sent,s=l.timestamp+604800,n.next=7,c.methods.newVoteProposal(t.current.value,e.current.value,s).send({from:o[0]}).on("transactionHash",function(e){document.getElementsByClassName("create-poll-description")[0].value="",document.getElementsByClassName("create-poll-question")[0].value=""});case 7:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,a.web3&&r.a.createElement("div",{className:"new-poll"},r.a.createElement(F.a,null,r.a.createElement(B.a,{sm:"12",md:{size:8,offset:2}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"}),r.a.createElement("div",{className:"card-body"},r.a.createElement(l.b,{to:"/profile/".concat(a.accounts[0])},r.a.createElement("img",{className:"new-poll-profile",src:S()(a.accounts[0])})),r.a.createElement(function(){return r.a.createElement(n.Fragment,null,r.a.createElement("input",{ref:t,name:"question",placeholder:"What question is on your mind?",className:"create-poll-question"}),r.a.createElement("textarea",{name:"description",ref:e,placeholder:"Description",className:"create-poll-description"}),r.a.createElement("button",{className:"btn btn-primary button-poll",onClick:c}," Create "))},null)))))),Object.keys(a.polls).reverse().map(function(e,t){return r.a.createElement(l.b,{to:"/poll/".concat(e)},r.a.createElement(we,{key:e,id:e}))}))};function Ne(){return r.a.createElement("center",null,r.a.createElement("div",{class:"page404"},r.a.createElement("h2",null," 404 not found "),r.a.createElement("label",null," Oops, looks like you've made a wrong turn...",r.a.createElement("br",null),r.a.createElement(l.b,{to:"/"}," Take me back! "))))}var ke=Object(E.h)(function(e){var t=Object(n.useContext)(m),a=t.dispatch;return t.state,Object(n.useEffect)(function(){return window.scrollTo(0,0)},[e.location.pathname]),Object(n.useEffect)(function(){!function(){var e=Object(b.a)(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return t=e.sent,n=parseFloat(t[0].price_usd),e.next=6,ue();case 6:r=e.sent,a({payload:{polls:r,price:n},type:"POLL"});case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("main",null,r.a.createElement(Y,null),r.a.createElement(h.a,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/poll/:address/:option?",component:we}),r.a.createElement(E.a,{path:"/profile/:address",component:ve}),r.a.createElement(E.a,{exact:!0,path:"/",component:xe}),r.a.createElement(E.a,{path:"/logout",component:xe}),r.a.createElement(E.a,{path:"/login",component:xe}),r.a.createElement(E.a,{path:"/create",component:xe}),r.a.createElement(E.a,{path:"/about",component:xe}),r.a.createElement(E.a,null,r.a.createElement(Ne,null)))))});o.a.render(r.a.createElement(function(e){var t=e.children,a=Object(n.useReducer)(function(e,t){switch(t.type){case"POLL":case"WEB3":return Object(s.a)({},e,t.payload);default:return e}},u),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement(p,{value:{state:o,dispatch:l}},t)},null,r.a.createElement(l.a,{basename:"/"},r.a.createElement(n.Fragment,null,r.a.createElement(ke,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[269,2,1]]]);
//# sourceMappingURL=main.6ca5f34b.chunk.js.map